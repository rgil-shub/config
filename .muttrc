# ~/.muttrc
#
# Version: 2014122018 (mutt 1.5.23)
#
# References: 
# -> http://www.elho.net/mutt/maildir
# -> https://wiki.debian.org/Mutt

# set from to ensure mutt doesn't put user@localhost.localhost 
set from="user@example.org"
set use_from=yes
set envelope_from="yes"

# set realname
set realname="username"

# set signature
set signature="~/.signature"

# pgp
set pgp_use_gpg_agent = yes
set pgp_sign_as = your_key_id 
set pgp_timeout = 3600
set crypt_autosign = yes
set crypt_replyencrypt = yes

# HTML  (Requires: .mailcap + links/w3m)
# auto_view text/html

### LOCAL ###

# First tell Mutt to use the Maildir format:
set mbox_type=Maildir

# Next configure the locations of the common folders:
set folder="~/Maildir"
set mask="!^\\.[^.]"
set mbox="~/Maildir"
set record="+.Enviados"
set postponed="+.Borradores"
set spoolfile="~/Maildir"

# Set up mailboxes by scanning for all subfolders in ~/Maildir:
mailboxes `echo -n "+ "; find ~/Maildir -maxdepth 1 -type d -name ".*" -printf "+'%f' "`
# Note that this requires find(1) from the GNU findutils, which on BSD systems usually is installed as gfind(1).

# Add macros to make the folder browser usable by always using the mailboxes setup above:
macro index c "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro pager c "<change-folder>?<toggle-mailboxes>" "open a different folder"

# To additionally get straight to the folder browser when copying, moving and attaching mail, add the following macros:
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
macro compose A "<attach-message>?<toggle-mailboxes>" "attach message(s) to this message"

### IMAP ###

# Cache (Mutt > 1.5.7 & 1.5.12) 
# http://dev.mutt.org/trac/wiki/MuttGuide/Caching
set header_cache = "~/.cache/mutt/headers"
set message_cachedir = "~/.cache/mutt/messages"

# Display download progress every 5K
set net_inc=5

### OTHER OPTIONS ###

# Set default editor
set editor="vim"

# Sort messages by thread
set sort=threads
set sort_aux = reverse-date-received

# Collapse old messages
set collapse_unread=no
folder-hook . 'push <collapse-all>'

# Headers
ignore *
unignore from subject to cc date x-mailer x-url user-agent x-operating-system x-pgp-key
unhdr_order *
hdr_order subject from to cc date
my_hdr X-Operating-System: `uname -s` `uname -r`
# my_hdr X-PGP-Key: http://example.org/~user/pubkey.asc

### COLOR DEFINITIONS ###

# basic colors
color normal white default
color error brightred default
color tilde magenta default
color message brightgreen default
color markers brightcyan default
color attachment brightcyan default
color search default green
color status brightblue black
color indicator brightyellow black
color tree blue default

# index
color index brightwhite default "~O" # new messages
color index brightwhite default "~N" # new messages
color index brightred default "~D"   # deleted messages

# headers
color hdrdefault white default
color header brightyellow default ^Subject:
color header brightwhite default ^From:
color header magenta default ^User-Agent:
color header magenta default ^X-Mailer:
color header magenta default ^X-Operating-System:
color header magenta default ^X-PGP-Key:

# body
color quoted blue default
color signature magenta default
color body magenta default "(ftp|http|https)://[^ ]+"  # point out URLs
color body magenta default [-a-z_0-9.]+@[-a-z_0-9.]+   # e-mail addresses
color underline brightgreen default

# pgp
color body brightyellow default "^gpg: .*"
color body brightyellow default "^Hash: .*"
color body brightred default "^gpg: Firma INCORRECTA.*"
color body brightred default "^gpg: BAD signature.*"
color body brightgreen default "^gpg: Firma correcta.*"
color body brightgreen default "^gpg: Good signature .*"
color body brightcyan default "-----BEGIN PGP SIGNED MESSAGE-----"
color body brightcyan default "-----BEGIN PGP SIGNATURE-----"
color body brightcyan default "-----END PGP SIGNATURE-----"

